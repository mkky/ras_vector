transforms:
  metrics_cluster:
    type: log_to_metric
    inputs:
      - filter_cmd.cluster
    metrics:
      - type: gauge
        field: connections
        name: process_connections
        tags:
          event_id: "{{ event_id }}"
          process: "{{ process }}"
          host: "{{ host }}"
          port: "{{ port }}"
          pid: "{{ pid }}"
          started_at: "{{ started_at }}"
          use: "{{ use }}"
          reserve: "{{ reserve }}"
          host_vector: "{{ host_vector }}"

      - type: gauge
        field: capacity
        name: process_capacity
        tags:
          event_id: "{{ event_id }}"
          process: "{{ process }}"
          host: "{{ host }}"
          port: "{{ port }}"
          pid: "{{ pid }}"
          started_at: "{{ started_at }}"
          use: "{{ use }}"
          reserve: "{{ reserve }}"
          host_vector: "{{ host_vector }}"

      - type: gauge
        field: memory_size
        name: process_memory_size
        tags:
          event_id: "{{ event_id }}"
          process: "{{ process }}"
          host: "{{ host }}"
          port: "{{ port }}"
          pid: "{{ pid }}"
          started_at: "{{ started_at }}"
          use: "{{ use }}"
          reserve: "{{ reserve }}"
          host_vector: "{{ host_vector }}"

      - type: gauge
        field: memory_excess_time
        name: process_memory_excess_time
        tags:
          event_id: "{{ event_id }}"
          process: "{{ process }}"
          host: "{{ host }}"
          port: "{{ port }}"
          pid: "{{ pid }}"
          started_at: "{{ started_at }}"
          use: "{{ use }}"
          reserve: "{{ reserve }}"
          host_vector: "{{ host_vector }}"

      - type: gauge
        field: selection_size
        name: process_selection_size
        tags:
          event_id: "{{ event_id }}"
          process: "{{ process }}"
          host: "{{ host }}"
          port: "{{ port }}"
          pid: "{{ pid }}"
          started_at: "{{ started_at }}"
          use: "{{ use }}"
          reserve: "{{ reserve }}"
          host_vector: "{{ host_vector }}"

      - type: gauge
        field: avg_call_time
        name: process_avg_call_time
        tags:
          event_id: "{{ event_id }}"
          process: "{{ process }}"
          host: "{{ host }}"
          port: "{{ port }}"
          pid: "{{ pid }}"
          started_at: "{{ started_at }}"
          use: "{{ use }}"
          reserve: "{{ reserve }}"
          host_vector: "{{ host_vector }}"

      - type: gauge
        field: avg_db_call_time
        name: process_avg_db_call_time
        tags:
          event_id: "{{ event_id }}"
          process: "{{ process }}"
          host: "{{ host }}"
          port: "{{ port }}"
          pid: "{{ pid }}"
          started_at: "{{ started_at }}"
          use: "{{ use }}"
          reserve: "{{ reserve }}"
          host_vector: "{{ host_vector }}"

      - type: gauge
        field: avg_lock_call_time
        name: process_avg_lock_call_time
        tags:
          event_id: "{{ event_id }}"
          process: "{{ process }}"
          host: "{{ host }}"
          port: "{{ port }}"
          pid: "{{ pid }}"
          started_at: "{{ started_at }}"
          use: "{{ use }}"
          reserve: "{{ reserve }}"
          host_vector: "{{ host_vector }}"

      - type: gauge
        field: avg_server_call_time
        name: process_avg_server_call_time
        tags:
          event_id: "{{ event_id }}"
          process: "{{ process }}"
          host: "{{ host }}"
          port: "{{ port }}"
          pid: "{{ pid }}"
          started_at: "{{ started_at }}"
          use: "{{ use }}"
          reserve: "{{ reserve }}"
          host_vector: "{{ host_vector }}"

      - type: gauge
        field: avg_threads
        name: process_avg_threads
        tags:
          event_id: "{{ event_id }}"
          process: "{{ process }}"
          host: "{{ host }}"
          port: "{{ port }}"
          pid: "{{ pid }}"
          started_at: "{{ started_at }}"
          use: "{{ use }}"
          reserve: "{{ reserve }}"
          host_vector: "{{ host_vector }}"

      - type: gauge
        field: available_perfomance
        name: process_available_perfomance
        tags:
          event_id: "{{ event_id }}"
          process: "{{ process }}"
          host: "{{ host }}"
          port: "{{ port }}"
          pid: "{{ pid }}"
          started_at: "{{ started_at }}"
          use: "{{ use }}"
          reserve: "{{ reserve }}"
          host_vector: "{{ host_vector }}"